(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-03be"],{"6JCy":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[t._m(0),t._v(" "),a("div",{staticClass:"swiper"},[a("el-carousel",{attrs:{interval:5e3,height:t.swiperHeight,arrow:"always"}},[a("el-carousel-item",[a("img",{attrs:{src:i("caDB"),alt:""}})]),t._v(" "),a("el-carousel-item",[a("img",{attrs:{src:i("Ukfk"),alt:""}})])],1)],1),t._v(" "),a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{id:"loginForm",model:t.loginForm,rules:t.loginRules,"auto-complete":"on","label-position":"left"}},[a("div",{staticClass:"title-container"},[a("h3",{staticClass:"title"},[t._v(t._s(t.$t("login.title")))]),t._v(" "),a("lang-select",{staticClass:"set-language"})],1),t._v(" "),a("el-form-item",{attrs:{prop:"username"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"user"}})],1),t._v(" "),a("el-input",{attrs:{placeholder:t.$t("login.adminUserName"),name:"adminUserName",type:"text","auto-complete":"on"},model:{value:t.loginForm.adminUserName,callback:function(e){t.$set(t.loginForm,"adminUserName",e)},expression:"loginForm.adminUserName"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"password"}})],1),t._v(" "),a("el-input",{attrs:{type:t.passwordType,placeholder:t.$t("login.pwd"),name:"pwd","auto-complete":"on"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleLogin(e):null}},model:{value:t.loginForm.pwd,callback:function(e){t.$set(t.loginForm,"pwd",e)},expression:"loginForm.pwd"}}),t._v(" "),a("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[a("svg-icon",{attrs:{"icon-class":"password"===t.passwordType?"eye":"eye-open"}})],1)],1),t._v(" "),a("el-button",{staticStyle:{width:"100%",height:"47px","margin-bottom":"30px"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v(t._s(t.$t("login.logIn"))+"\n\t\t\t")]),t._v(" "),a("el-button",{staticStyle:{width:"100%",height:"47px","margin-bottom":"30px","margin-left":"0"},attrs:{loading:t.loading},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("注册\n\t\t\t")])],1),t._v(" "),a("el-dialog",{staticStyle:{height:"70%"},attrs:{title:"注册账号",id:"register",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.clearData}},[a("el-form",{attrs:{model:t.registerFrom}},[a("el-form-item",{attrs:{label:"手机号","label-width":"100px"}},[a("el-input",{attrs:{autocomplete:"off",maxlength:"11",clearable:"",placeholder:"请输入手机号"},model:{value:t.registerFrom.mobile,callback:function(e){t.$set(t.registerFrom,"mobile",e)},expression:"registerFrom.mobile"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":"100px"}},[a("el-input",{attrs:{autocomplete:"off",clearable:"",placeholder:"请输入密码"},model:{value:t.registerFrom.password,callback:function(e){t.$set(t.registerFrom,"password",e)},expression:"registerFrom.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"验证码","label-width":"100px"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{autocomplete:"off",placeholder:"请输入验证码",clearable:""},model:{value:t.registerFrom.mobileCode,callback:function(e){t.$set(t.registerFrom,"mobileCode",e)},expression:"registerFrom.mobileCode"}}),t._v(" "),a("span",{staticClass:"vCode-btn-text",attrs:{id:"vCodeBtn"},on:{click:t.blueText}},[t._v(t._s(t.innerText))])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.register}},[t._v("确 定")])],1)],1),t._v(" "),a("div",{staticStyle:{"z-index":"3000"},attrs:{id:"c1"}})],1)},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"logo"},[e("img",{attrs:{src:i("tkAB"),alt:""}})])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"7jNd":function(t,e,i){},"83FQ":function(t,e,i){"use strict";var a=i("Mera");i.n(a).a},C3h0:function(t,e,i){"use strict";i.r(e);var a=i("xSAu"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},FA84:function(t,e,i){"use strict";var a=i("7jNd");i.n(a).a},FH45:function(t,e,i){"use strict";i.r(e);var a=i("kVKj"),n=i("C3h0");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("83FQ");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"e89b5c7a",null);r.options.__file="socialsignin.vue",e.default=r.exports},Mera:function(t,e,i){},Ukfk:function(t,e,i){t.exports=i.p+"static/img/back2.24cb679.jpg"},c11S:function(t,e,i){"use strict";var a=i("gTgX");i.n(a).a},caDB:function(t,e,i){t.exports=i.p+"static/img/back.b3a9529.jpeg"},gTgX:function(t,e,i){},kVKj:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"social-signup-container"},[i("div",{staticClass:"sign-btn",on:{click:function(e){t.wechatHandleClick("wechat")}}},[i("span",{staticClass:"wx-svg-container"},[i("svg-icon",{staticClass:"icon",attrs:{"icon-class":"wechat"}})],1),t._v(" 微信\n  ")]),t._v(" "),i("div",{staticClass:"sign-btn",on:{click:function(e){t.tencentHandleClick("tencent")}}},[i("span",{staticClass:"qq-svg-container"},[i("svg-icon",{staticClass:"icon",attrs:{"icon-class":"qq"}})],1),t._v(" QQ\n  ")])])},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},mYxE:function(t,e,i){"use strict";i.r(e);var a=i("upXb"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e.default=n.a},ntYl:function(t,e,i){"use strict";i.r(e);var a=i("6JCy"),n=i("mYxE");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("c11S"),i("FA84");var o=i("KHd+"),r=Object(o.a)(n.default,a.a,a.b,!1,null,"511b11a0",null);r.options.__file="index.vue",e.default=r.exports},tkAB:function(t,e,i){t.exports=i.p+"static/img/logo.2611608.jpg"},upXb:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=u(i("QbLZ")),n=(i("Yfch"),i("+RRk")),s=u(i("Q2AE")),o=u(i("ETGp")),r=u(i("FH45")),l=u(i("gjeX")),c=u(i("LvDl"));u(i("pC3k"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"Login",components:{LangSelect:o.default,SocialSign:r.default},data:function(){return{loginForm:{adminUserName:"",pwd:""},innerText:"获取验证码",wait:60,registerFrom:{},dialogFormVisible:!1,loginRules:{adminUserName:[{required:!0,trigger:"blur",validator:function(t,e,i){i()}}],pwd:[{required:!0,trigger:"blur",validator:function(t,e,i){e.length<6?i(new Error("密码不能少于6位")):i()}}]},passwordType:"password",loading:!1,showDialog:!1,swiperHeight:"",redirect:void 0,myCaptchaToken:0}},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},computed:{name:function(){return s.default.getters.name}},mounted:function(){var t=this;this.myCaptcha=_dx.Captcha(document.getElementById("c1"),{appId:"22670a97d0ee5e5621e76ad732effce9",success:function(e){console.log("token:",e),t.myCaptchaToken=e,console.log("验证成功的时候掉一次"),t.sendMessage(),t.myCaptcha.hide()},fail:function(t){console.log(t)},language:localStorage.getItem("language"),style:"popup",inlineFloatPosition:"up"})},created:function(){this.swiperHeight=document.body.clientHeight+"px"},destroyed:function(){},methods:{myCaptchaButton:function(){this.myCaptcha.reload(),this.myCaptcha.show()},clearData:function(){this.myCaptcha.reload(),this.myCaptcha.hide(),this.dialogFormVisible=!1,this.registerFrom={}},register:function(){var t=this,e=(0,a.default)({},this.registerFrom);e.password=(0,l.default)(e.password),(0,n.register)(e).then(function(e){console.log(e,"res"),200==e.data.code?(t.$message.success(e.data.msg),t.dialogFormVisible=!1):t.$message.error(e.data.msg)})},time:function(){var t=this;0==this.wait?(this.innerText="获取验证码",console.log("-----++++++====="),this.wait=59):(this.innerText=this.wait+"s后再发",this.wait--,setTimeout(function(){t.time()},1e3))},blueText:function(){/^1[3456789]\d{9}$/.test(this.registerFrom.mobile)?(console.log(this.wait,"wait"),60==this.wait&&this.sendMessage()):(this.$message.warning("请输入正确手机号"),this.registerFrom.mobile="")},showPwd:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"},sendMessage:function(){var t=this;""!=this.registerFrom.mobile?(0,n.sendMessage)({mobile:this.registerFrom.mobile,imgToken:this.myCaptchaToken}).then(function(e){if(200==e.data.code){t.$message.success(e.data.msg);var i=setInterval(function(){console.log(t.wait),t.wait<=1?(clearInterval(i),t.wait=60,t.innerText="获取验证码"):(t.innerText=t.wait+"s后再发",t.wait--)},1e3);t.myCaptcha.hide()}else t.myCaptchaButton()}):this.$message.warning("请输入手机号")},handleLogin:function(){var t=this;this.$refs.loginForm.validate(function(e){if(!e)return!1;var i=c.default.clone(t.loginForm);i.pwd=(0,l.default)(i.pwd);var a={mobile:i.adminUserName,password:i.pwd};t.$store.dispatch("LoginByUsername",a).then(function(e){t.loading=!1,t.$router.push({path:t.redirect||"/main/index"}),location.reload()}).catch(function(e){t.loading=!1,t.$message({type:"error",message:e.data.msg||"用户信息有误"})})})}}}},xSAu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"SocialSignin",methods:{wechatHandleClick:function(t){alert("ok")},tencentHandleClick:function(t){alert("ok")}}}}}]);